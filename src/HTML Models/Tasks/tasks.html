<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        body {
            margin: 0 auto;
            height: 100vh;
            height: calc(var(--vh, 1vh) * 100);
            width: 100vw;
        }


        li:focus {
            background-color: yellow;
        }

        a:focus {
            background-color: green;
        }
    </style>
    <title>Tasks</title>
</head>

<body>
    <div class="container" id="taskContainer">
        <!-- NOTE: solution 1 -->
        <ul>
            <li tabindex="0">Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequatur necessitatibus quidem
                animi, facilis nisi, temporibus explicabo incidunt deleniti consequuntur sint voluptatibus veniam
                accusantium nemo velit, iste dolorum dignissimos aliquid quibusdam.</li>
            <li tabindex="0">Nihil repellat doloribus doloremque deserunt est, officiis sed omnis odit earum
                consequuntur obcaecati illo sapiente. Dolorem molestias itaque, quam ducimus quod omnis accusamus, aut
                expedita soluta necessitatibus nisi saepe ad?</li>
            <li tabindex="0">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Eius, sed exercitationem deleniti mollitia,
                fugit, architecto incidunt magnam laudantium dolore ea veritatis quasi et odio. Minima animi quis ea
                voluptates vel?
                <ul>
                    <li tabindex="0">lorem</li>
                    <li tabindex="0">AME</li>
                </ul>
            </li>
            <li tabindex="0">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Iste tempore quidem odio omnis
                voluptate dicta sequi. Repudiandae quas qui animi nihil, commodi blanditiis quisquam minus rerum
                voluptatem nostrum dolorem. Quidem?</li>
        </ul>
    </div>
</body>
<script>
    // TODO: (onFocus)Tab -> Indent Outdent

    // TODO: dblClick -> Rename

    document.addEventListener("keydown", event => {
        const activeEl = document.querySelector("li:focus");
        event.preventDefault();
        // (onFocus)Ctrl + Shift + Delete | CMD + Delete -> Remove Task
        // TODO: dblCheck delete keyCode in Windows
        if (activeEl) {
            // Windows
            if (event.ctrlKey)
                if (event.shiftKey)
                    if (event.keyCode == 8)
                        console.log("Remove a task")

            // Mac
            if (event.metaKey)
                if (event.keyCode == 8)
                    console.log("Remove a task")

            // (onFocus)Enter -> New Task
            // TODO: dblCheck enter KeyCode in windows
            if (event.keyCode == 13)
                console.log("New Task")


            if (event.keyCode == 9) {
                // on tab keyDown
                const taskContainer = document.getElementById("taskContainer");
                let shouldIndent;
                const grandParentEl = activeEl.parentElement.parentElement;
                if (grandParentEl == taskContainer) {
                    // Indent
                    const prevSibEl = activeEl.previousElementSibling;
                    // if prevSibling exists: appendChild to previousSibling
                    if (prevSibEl) {
                        // if prevSibEl has ul child append to that otherwise create a new one
                        const ulExist = prevSibEl.firstElementChild;
                        if (ulExist) {
                            ulExist.appendChild(activeEl)
                        } else {
                            const ul = document.createElement("ul");
                            ul.appendChild(activeEl)
                            prevSibEl.appendChild(ul);
                        }
                    }
                    // else: Do Nothing
                    // active element has no previous sibling to indent (OR one list item is only available)
                } else if (grandParentEl.tagName == "LI") {
                    // Outdent
                    debugger
                }
            }
        }
    })
</script>

</html>